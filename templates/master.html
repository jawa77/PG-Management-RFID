<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Dashboard - SB Admin</title>
        <link href="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/style.min.css" rel="stylesheet" />
        <link href="css/styles.css" rel="stylesheet" />
        <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    </head>
    <body class="sb-nav-fixed">
        {% include "_topnavBar.html" %}

        <div id="layoutSidenav">
          
            {% include "_sidenavBar.html" %}

            <div id="layoutSidenav_content">
                <main>
                    <div class="container-fluid px-4">
                        <h1 class="mt-4">Dashboard</h1>
                        {% block main %} {% endblock %}
                        
                    </div>
                </main>
                    
            </div>
        </div>

        <!-- sibi modal -->
<div id="modalsGarbage">
    <div class="modal fade" id="dummy-dialog-modal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"></h5>
                    <div class="modal-subtitle float-end text-small"></div>
                </div>
                <div class="modal-body">
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>
  </div>
  
  
  
  
  <script src="/dialog.js"> </script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
        <script src="js/scripts.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js" crossorigin="anonymous"></script>
        <script src="assets/demo/chart-area-demo.js"></script>
        <script src="assets/demo/chart-bar-demo.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/umd/simple-datatables.min.js" crossorigin="anonymous"></script>
        <script src="js/datatables-simple-demo.js"></script>
    </body>


    <script>
        $(document).ready(function() {
            $('.togBut').on('click', function() {
                var button = $(this);
                var id = $(this).closest('tr').find('td:eq(1)').text(); // Get the ID from the second <td> in the same row
                var apiUrl = '/api/v1/toggleactive'; 
        
                // Prepare the data to send in the POST request
                var data = {
                    rfidno: id
                };    
                
                $.post(apiUrl, data, function(response) {
                    console.log('API POST request'+response);
                    if (response == 1) {
                        button.removeClass('bg-success').addClass('bg-danger');
                        button.text('deactivated');
                    }
                    else if (response == 0) {
                        button.removeClass('bg-danger').addClass('bg-success');
                        button.text('activated');
                    }
                    
                    // You can handle the API response here
                })
                .fail(function(error) {
                    console.error('API POST request failed');
                    // Handle the error here
                });
            });
        
            
            $('.logBut').on('click', function() {
                var button = $(this);
                var rfid = $(this).closest('tr').find('td:eq(1)').text(); // Get the ID from the second <td> in the same row
                    d=new Dialog("See Logs",`
                    <h1>hai</h1>
                    
                    `);
                    d.setButtons([
      
      
      
      
                    {
      "name":"delete",
      "class":"btn-danger",
       onClick: function(event){
        console.log("this "+postid+" is deleted");
        

        $.post("/files/delete",
        {
          imageid:postimgurl
        },
        function(data){
         
          
          if (data['status']==200) {
            $('#'+postid).remove();
            
          } else {
            console.log("ada dai failed")
          }
          
          })
        
          $(event.data.modal).modal('hide');
      }
      },

      {
        name: "Close",
        class: "btn-warning",
        
        onClick: function(event){
            $(event.data.modal).modal('hide');
        }
      }  

  ])
    d.show()
        
          
           
            });
        
        
        });

        </script>


</html>
